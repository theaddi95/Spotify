---
title: "Spotify Analysis"
format:
  html:
    code-fold: true
editor: visual
---

## Analysis of my Spotify history

Data were downloaded from my spotify account using the function in the spotify account. An manual to do so can be found on [Spotify support page](https://support.spotify.com/us/article/data-rights-and-privacy-settings/). After download, the data are provided as json files and were converted to a data frame using the ConvertData.R script.

## Import the required packages

First, the needed packages are loaded. The packages used are included in the tidyverse and the spotifyR package for in detail analyse of songs or artists. Since the code was started with #\| echo: false (the `echo: false` -option), the code will not be shown in the final document.

```{r}
#| echo: false
library("ggplot2")
library(tidyr)
library(dplyr)
```

Next, we load the dataset in the `data`-object.

```{r}
data <- read.csv("MyData/TotalHistory.csv", row.names = "X")
data$ConvTime <- as.Date(data$ConvTime)
head(data)
```

## Exploratory Analysis
First, we look at some general properties of the dataset. There are a total of `r nrow(data)` observations, with `r length(unique(data$artistName))` unique artist and `r length(unique(data$trackName))` unique listened songs on `r length(unique(data$ConvTime))` days. Furthermore, the mean leasting time was `r round(mean(data$msPlayed)/1000, 2)` seconds. </br>
This leads to an average of `r round( nrow(data)/ length(unique(data$ConvTime)),1)` songs per day as well as `r round( length(unique(data$trackName))/ length(unique(data$artistName)),1)` songs per artist. Since this analysis does not capture individual artists or days, this analysis will go into more detail to capture this variance.


```{r}
summary(data)
```


### Artist over time
Next, we look at how long certain artists were played by day.
```{r}
data %>% 
  group_by(artistName, ConvTime) %>% 
  count() %>% 
  summarise(Total = cumsum(n)) %>% 
  ggplot(aes(x=ConvTime, y=Total, color=artistName))+
  geom_line()+
  scale_x_date()+
  guides(color="none")

```

